<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- META DATA -->
    <!-- Define type of characters used in our website -->
    <meta charset="UTF-8" />
    <!-- Keywords for search engine: will be useful when publishing -->
    <meta name="keywords" content="Perfumes, Fragrances">
    <!--  Different devices with different resolutions-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Description displayed in search engine -->
    <meta name="description" content="Aloura: Unlock the Power of Scent. Discover high-quality fragrances at catchy prices. Your perfect fragrance journey starts here.">
    <title>Aloura - Our Story</title>
    <!-- END OF META DATA -->

    
    <!-- Tab Logo -->
    <link rel="icon" type="image/x-icon" href="../img/favicon-logo.ico">

    <!-- Font Awesome (Linking FootAwesome Website to our Code) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Bootstrap CSS (Linking it to our Code) -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- Tab Logo / 'Favicon' -->
    <link rel="icon" type="image/x-icon" href="../img/favicons/rounded-background-favicon.ico" />

    <!-- CSS Links (Connecting the CSS file to this file) -->
    <link rel="stylesheet" href="../css/navBar.css" />
    <link rel="stylesheet" href="../css/ourStory.css" />
    <link rel="stylesheet" href="../css/page-loader.css"> <!-- Page loader related -->

    <!-- JS Links (Connecting the JS file to this file) -->
    <script src="../js/fluidEffect/jquery.min.js"></script>
    <script src="../js/fluidEffect/fluid.min.js"></script>
    <script src="../js/fluidEffect/app.js"></script>
    <script src="../js/script.js"></script>
    <script src="../js/page-loader.js"></script> <!-- Page Loader related -->

    <!-- OVERRIDE THE BACKGROUND COLOR FOR LOADER TO MATCH -> SEE IF CHANGE LATER WITH DARK MODE BUTTON -->
     <style>
      .fullpage-loader {
        background: #141313;  /* White background */
      }
     </style>

  </head>

  <body>
    <!-- Pre-loader at the top of body -->
    <div class="fullpage-loader">  <!-- Full-screen overlay container -->
      <div class="loader-content">  <!-- Centers content vertically/horizontally -->
        <div class="logo-reveal">  <!-- Container for logo animation -->
          <img src="../img/logo.png" alt="Logo">  <!-- Logo -->
        </div>
        <!-- Loading bar is trapped into a container so it can fill it entirely! -->
        <div class="loading-bar-container">  <!-- Background track for progress bar -->
          <div class="loading-bar"></div>  <!-- Animated progress bar -->
        </div>
      </div>
    </div>

    <!-- Navbar -->
    <nav>

      <div class="logo">
        <a href="../../index.html"> <img src="../img/logo.png" alt="Logo"/></a>
      </div>

      <div class="links">
        <ul>
          <li><a href="all-fragrances.html">Fragrances</a></li>
          <li><a href="#">Collections</a></li>
          <li><a href="#">Gifting</a></li>
          <li><a href="our-story.html">Our Story</a></li>
        </ul>
      </div>

      <div class="actions">
        <ul>
          <li><i class="fa-solid fa-magnifying-glass"></i></li>
          <li><i class="fa-regular fa-circle-user"></i></li>
          <li><i class="fa-solid fa-cart-shopping"></i></li>
        </ul>
      </div>
    </nav>


    <!-- Grey Background Section -->
    <div class="grey-section">
      <!-- Canvas for Fluid Effect -->
      <canvas id="grey-fluid-canvas"></canvas>
  
      <div class="grey-content">
          <div class="text-container">
              <h2>Scent. <br> Elegance. <br><span class="glow">Eternity.</span></h2>
              <p>Crafted with the finest essences, our fragrances embody the perfect balance of strength and elegance. 
                Each scent is meticulously blended to evoke timeless sophistication, <b>leaving a lasting impression.</b> With exquisite 
                notes that unfold beautifully over time,<b> our collection redefines luxury</b>, offering a fragrance experience that is as bold as it is unforgettable.</p>
          </div>
  
          <!-- New container wrapping video and button -->
          <div class="video-control-container">
            <!-- Original video element -->
            <video id="cyclingVideo" class="grey-video" autoplay muted playsinline>
                <source id="videoSource" src="../videos/photoshoot-2.mp4" type="video/mp4">
            </video>

            <!-- Hidden audio element that will play the same audio -->
            <audio id="videoAudio" loop>
              <source src="../audio/Doomsday (Instrumental).mp3" type="video/mp4">
            </audio>
            
            <!-- Mute Button -->
            <button class="video-mute-btn" id="muteToggle">
                <i class="fas fa-volume-mute"></i>
            </button>
          </div>
      </div>
  </div>
  <script>
        // AUDIO RELATED
        const muteBtn = document.getElementById('muteToggle');
        const muteIcon = muteBtn.querySelector('i');
        const audioElement = document.getElementById('videoAudio');
        
        // Set initial volume
        audioElement.volume = 0.01;
        
        // Mute toggle functionality
        muteBtn.addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent event bubbling

            if (audioElement.paused) {
            // Start audio playback
            audioElement.play();
            muteIcon.className = 'fas fa-volume-up';
            } else {
              // Pause audio playback
              audioElement.pause();
              muteIcon.className = 'fas fa-volume-mute';
            }
        });

        // VIDEO CYCLE RELATED
        document.addEventListener('DOMContentLoaded', function () {
          const video = document.getElementById('cyclingVideo');
          const source = document.getElementById('videoSource');

          // Array of video sources to cycle through
          const videos = [
              "../videos/photoshoot-2.mp4",
              "../videos/photoshoot.mp4",
              "../videos/photoshoot-romeo.mp4",
              "../videos/photoshoot-3.mp4",
              "../videos/photoshoot-nasser.mp4"
          ];

          let currentIndex = 0;

          video.onended = function () {
                video.style.transition = "opacity 0.7s"; 
                video.style.opacity = 0; // Fade out

                setTimeout(() => {
                    currentIndex = (currentIndex + 1) % videos.length;
                    source.src = videos[currentIndex];

                    video.load();
                    video.oncanplay = function () {
                        video.style.opacity = 1; // Fade in
                        video.play();
                    };
                }, 700); // Wait 1s before switching video
            };
          });
        
</script>

<script>
  // Add this as a new script file or at the end of your HTML

document.addEventListener('DOMContentLoaded', function() {
  // Allow time for other scripts to initialize
  setTimeout(function() {
    const canvas = document.getElementById('grey-fluid-canvas');
    if (!canvas) return;
    
    // Function to simulate mouse down event (pressing the mouse button)
    function simulateMouseDown(x, y) {
      const rect = canvas.getBoundingClientRect();
      const mouseDownEvent = new MouseEvent('mousedown', {
        bubbles: true,
        cancelable: true,
        view: window,
        clientX: rect.left + x,
        clientY: rect.top + y,
        button: 0, // Left mouse button
        buttons: 1 // Left mouse button pressed
      });
      canvas.dispatchEvent(mouseDownEvent);
    }
    
    // Function to simulate mouse move event while button is pressed
    function simulateMouseMove(x, y) {
      const rect = canvas.getBoundingClientRect();
      const mouseMoveEvent = new MouseEvent('mousemove', {
        bubbles: true,
        cancelable: true,
        view: window,
        clientX: rect.left + x,
        clientY: rect.top + y,
        button: 0, // Left mouse button
        buttons: 1 // Left mouse button pressed
      });
      canvas.dispatchEvent(mouseMoveEvent);
    }
    
    // Function to simulate mouse up event (releasing the mouse button)
    function simulateMouseUp(x, y) {
      const rect = canvas.getBoundingClientRect();
      const mouseUpEvent = new MouseEvent('mouseup', {
        bubbles: true,
        cancelable: true,
        view: window,
        clientX: rect.left + x,
        clientY: rect.top + y,
        button: 0, // Left mouse button
        buttons: 0 // No buttons pressed
      });
      canvas.dispatchEvent(mouseUpEvent);
    }
    
    // Simulate a complete mouse interaction (down, move, up)
    function simulateFullMouseInteraction() {
      const canvasWidth = canvas.offsetWidth;
      const canvasHeight = canvas.offsetHeight;
      
      // Random position
      const startX = Math.random() * canvasWidth;
      const startY = Math.random() * canvasHeight;
      
      // Simulate mouse down
      simulateMouseDown(startX, startY);
      
      /* This means the animation lasts for 10sec atleast i think lmao, but dont you dare change these 3*/
      // THE FOLLOWING 3 CONTROLS HOW AFTER HOW LONG WILL THE ANIMATION HYBOOZ, SO MAKE IT A VERY LARGE NUMBER
      // Simulate mouse movements
      setTimeout(function() {
        // Add some slight movement
        simulateMouseMove(startX + 5, startY + 5);
      }, 99999999999999);
      
      setTimeout(function() {
        simulateMouseMove(startX + 10, startY + 10);
      }, 99999999999999);
      
      // Simulate mouse up
      setTimeout(function() {
        simulateMouseUp(startX + 10, startY + 10);
      }, 99999999999999);
    }
    
    // Set initial trigger
    simulateFullMouseInteraction();
    
    // Continuously simulate mouse interactions
    setInterval(simulateFullMouseInteraction, 1);
  }, 100); // Wait 0.1 second for page to be fully loaded
});
</script>

</body>
</html>